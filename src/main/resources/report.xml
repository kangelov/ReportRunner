<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-4.0.xsd
">

    <bean id="fastDateFormat" class="org.apache.commons.lang3.time.FastDateFormat" factory-method="getInstance">
        <constructor-arg value="MM/dd/yyyy"/>
    </bean>

    <bean id="mmddyyyyAsString" class="java.lang.String" factory-bean="fastDateFormat" factory-method="format" scope="request">
        <constructor-arg>
            <bean class="java.util.Date" factory-bean="reportFactory" factory-method="getReportDate"/>
        </constructor-arg>
    </bean>

    <bean id="successReportDao" class="com.qualicom.rr.dao.impl.ReportDaoImpl" scope="request">
        <property name="dataSource" ref="tmpgarDataSource"/>
        <property name="query" value="SELECT TRUNC(PT.TRANS_DT) as transDt, PTT.PYMT_TRANS_TYPE_CD as transTypeCd, PTR.trans_reason_desc as transReasonDesc, count(PT.PYMT_TRANS_ID) as numTrans FROM PYMT_TRANS PT,  PYMT_TRANS_TYPE PTT, PYMT_TRANS_REASON PTR WHERE PT.PYMT_TRANS_TYPE_ID = PTT.PYMT_TRANS_TYPE_ID(+) AND PT.PYMT_TRANS_REASON_ID = PTR.PYMT_TRANS_REASON_ID(+) AND TRUNC(PT.TRANS_DT)= TO_DATE (:mmddyyyy, 'MM/DD/YYYY') AND PT.PYMT_TRANS_TYPE_ID IN ( 1,2) and pt.pymt_trans_status_id !=3 AND PTR.TRANS_REASON_DESC !='AUTHONLY' GROUP BY  TRUNC(PT.TRANS_DT), PTT.PYMT_TRANS_TYPE_CD, PTR.trans_reason_desc ORDER BY 1, 2, 3"/>
        <property name="reportColumns">
            <bean class="com.qualicom.rr.model.ReportColumns">
                <constructor-arg name="list">
                    <util:list value-type="java.lang.String">
                        <value>transDt</value>
                        <value>transTypeCd</value>
                        <value>transReasonDesc</value>
                        <value>numTrans</value>
                    </util:list>
                </constructor-arg>
            </bean>
        </property>
        <property name="reportParameters">
            <bean class="com.qualicom.rr.model.ReportParameters">
                <constructor-arg name="map">
                    <map>
                        <entry key="mmddyyyy" value-ref="mmddyyyyAsString"/>
                    </map>
                </constructor-arg>
            </bean>
        </property>
    </bean>

    <bean id="failureReportDao" class="com.qualicom.rr.dao.impl.ReportDaoImpl" scope="request">
        <property name="dataSource" ref="tmpgarDataSource"/>
        <property name="query" value="SELECT TRUNC(PT.TRANS_DT) as transDt, PTT.PYMT_TRANS_TYPE_CD as transTypeCd, PTR.trans_reason_desc as transReasonDesc, PT.pymt_trans_status_id as transStatusId, count(PT.PYMT_TRANS_ID) as numTrans FROM PYMT_TRANS PT,  PYMT_TRANS_TYPE PTT, PYMT_TRANS_REASON PTR WHERE PT.PYMT_TRANS_TYPE_ID = PTT.PYMT_TRANS_TYPE_ID(+) AND PT.PYMT_TRANS_REASON_ID = PTR.PYMT_TRANS_REASON_ID(+) AND TRUNC(PT.TRANS_DT)= TO_DATE (:mmddyyyy, 'MM/DD/YYYY') AND PT.PYMT_TRANS_TYPE_ID IN ( 1,2) and pt.pymt_trans_status_id=3 AND PTR.TRANS_REASON_DESC !='AUTHONLY' GROUP BY  TRUNC(PT.TRANS_DT), PTT.PYMT_TRANS_TYPE_CD, PTR.trans_reason_desc, PT.pymt_trans_status_id ORDER BY 1, 2, 3"/>
        <property name="reportColumns">
            <bean class="com.qualicom.rr.model.ReportColumns">
                <constructor-arg name="list">
                    <util:list value-type="java.lang.String">
                        <value>transDt</value>
                        <value>transTypeCd</value>
                        <value>transReasonDesc</value>
                        <value>transStatusId</value>
                        <value>numTrans</value>
                    </util:list>
                </constructor-arg>
            </bean>
        </property>
        <property name="reportParameters">
            <bean class="com.qualicom.rr.model.ReportParameters">
                <constructor-arg name="map">
                    <map>
                        <entry key="mmddyyyy" value-ref="mmddyyyyAsString"/>
                    </map>
                </constructor-arg>
            </bean>
        </property>
    </bean>

    <bean id="detailedFailureReportDao" class="com.qualicom.rr.dao.impl.ReportDaoImpl" scope="request">
        <property name="dataSource" ref="tmpgarDataSource"/>
        <property name="query" value="SELECT TRUNC(PT.TRANS_DT) as transDt, PTT.PYMT_TRANS_TYPE_CD as transTypeCd, PTR.trans_reason_desc as transReasonDesc, PT.response_cd as responseCd, count(PT.PYMT_TRANS_ID) as numTrans FROM PYMT_TRANS PT,  PYMT_TRANS_TYPE PTT, PYMT_TRANS_REASON PTR WHERE PT.PYMT_TRANS_TYPE_ID = PTT.PYMT_TRANS_TYPE_ID(+) AND PT.PYMT_TRANS_REASON_ID = PTR.PYMT_TRANS_REASON_ID(+) AND TRUNC(PT.TRANS_DT)= TO_DATE (:mmddyyyy, 'MM/DD/YYYY') AND PT.PYMT_TRANS_TYPE_ID IN ( 1,2) and pt.pymt_trans_status_id=3 AND PTR.TRANS_REASON_DESC !='AUTHONLY' GROUP BY  TRUNC(PT.TRANS_DT), PTT.PYMT_TRANS_TYPE_CD, PTR.trans_reason_desc, PT.response_cd ORDER BY 1, 2, 3"/>
        <property name="reportColumns">
            <bean class="com.qualicom.rr.model.ReportColumns">
                <constructor-arg name="list">
                    <util:list value-type="java.lang.String">
                        <value>transDt</value>
                        <value>transTypeCd</value>
                        <value>transReasonDesc</value>
                        <value>responseCd</value>
                        <value>numTrans</value>
                    </util:list>
                </constructor-arg>
            </bean>
        </property>
        <property name="reportParameters">
            <bean class="com.qualicom.rr.model.ReportParameters">
                <constructor-arg name="map">
                    <map>
                        <entry key="mmddyyyy" value-ref="mmddyyyyAsString"/>
                    </map>
                </constructor-arg>
            </bean>
        </property>
    </bean>

</beans>